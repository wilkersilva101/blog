<div id="header">
  <div class="user-info">
    <%= render partial: 'account_links' %>
  </div>
</div>

<p style="color: green"><%= notice %></p>

<% if user_signed_in? %>
  <%= search_form_for @q do |f| %>
    <%= f.label :text_cont, 'Pesquisar Texto' %>
    <%= f.search_field :text_cont %>
    <%= f.submit 'Pesquisar' %>
  <% end %>

  <div id="articles">
    <% @articles.each do |article| %>
      <div class="article">
        <h2 style="font-size: 22px;"><%= article.title %></h2>
        <p><strong>Texto:</strong> <%= article.text %></p>
        <p><strong>Usuário:</strong> <%= article.user.email %></p>
        <p><strong>Data:</strong> <%= article.created_at.in_time_zone('Brasilia').strftime('%d %m %Y %H:%M:%S') %></p>
        <div class="actions">
          <%= link_to "Mostrar", article %>
          <% if can? :update, article %>
            <%= link_to "Editar", edit_article_path(article) %>
          <% end %>
          <% if can? :destroy, article %>
            <%= link_to "Deletar", article, method: :delete, data: { confirm: 'Tem certeza?' } %>
          <% end %>
        </div>
      </div>
    <% end %>
  </div>

  <% if can? :create, Article %>
    <%= link_to "Novo artigo", new_article_path %>
  <% end %>

  <div id="pagination">
    <%= paginate @articles %>
  </div>
<% else %>
  <p>Você precisa estar logado para ver os artigos.</p>
<% end %>
